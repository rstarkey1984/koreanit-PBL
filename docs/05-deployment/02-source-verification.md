# 소스 검증

이 문서는 배포 이전에 수행하는 **소스 검증 단계**를 정의한다.
이 단계는 코드 품질 검사가 아니라, **배포 환경 적합성 검사**다.

---

## 학습 목표

* 소스 검증의 정확한 의미를 이해한다
* 배포 실패를 유발하는 코드 패턴을 식별한다
* 환경 의존 코드와 배포 설정 오류를 제거한다

---

## 1. 소스 검증의 정의

소스 검증이란,

> 이 소스 코드가 Docker + Nginx + 실제 배포 환경에서
> 수정 없이 실행 가능한지를 확인하는 과정이다.

---

## 2. 검증 대상과 비대상

### 검증 대상

* 환경 변수 사용 여부
* 네트워크 주소(host, port)
* 프로파일 설정
* 프록시 경로와 API 경로 일관성

### 검증 비대상

* 알고리즘
* 성능 최적화
* 비즈니스 로직의 적절성

---

## 3. 주요 검증 항목

### 3-1. localhost 사용 여부

컨테이너 내부에서 `localhost`를 사용하는 코드는 배포 시 실패한다.

검증 포인트:

* datasource URL에 localhost가 있는가
* Redis host가 localhost인가

---

### 3-2. 환경 변수 기반 설정 여부

배포 환경에서는 설정 값이 코드에 하드코딩되면 안 된다.

검증 포인트:

* DB 정보가 환경 변수로 주입되는가
* docker profile에서 설정이 누락되지 않았는가

---

### 3-3. 프록시 경로 정합성

Nginx는 `/api/*` 요청을 API 컨테이너로 전달한다.

검증 포인트:

* Controller 경로가 프록시 구조를 전제로 작성됐는가
* `/api` prefix 기준이 일관적인가

---

## 4. 이 단계의 완료 기준

* 컨테이너 환경 기준에 어긋나는 코드가 없다
* 배포 시 주소/포트 변경이 필요 없다
* docker 실행 환경에서 설정 누락이 없다

## 다음 단계

→ [**빌드 및 배포**](/docs/05-deployment/03-build-and-deploy.md)
